<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Islands</title>
    <style>
body {
  font: 1.17rem/1.6 Georgia, 'Times New Roman', serif;
  padding: 2rem 0 8em 0;
  max-width: 700px;
  margin: 0 auto;
  padding: 0 1rem;
  margin-bottom: 64px;
  color: #111;
}

h1, h2, h3, h4, .sans {
  font-family: 'Helvetica Neue', 'Arial Nova', Helvetica, Arial, sans-serif;
  margin-bottom: 0;
}

h2, h3, h4 {
  margin-top: 2em;
}

nav {
  margin-top: 32px;
  display: flex;
  gap: 32px;
}

nav a {
  text-decoration: none;
  color: black;
  font-weight: bold;
}

nav .active {
  text-decoration: underline;
}

pre, code {
  font-family: Consolas, Menlo, Monaco, monospace;
  font-size: 0.9em;
  border-radius: 4px;
  background-color: ghostwhite;
  padding: 4px;
}

pre code {
  padding: 0;
  background: none;
}

pre {
  padding: 12px;
  overflow-x: auto;
}

main > pre {
  margin-left: -6px;
}

img, svg {
  max-width: 100%;
}

.permalink {
  color: inherit;
  text-decoration: none;
}
    </style>
  </head>
  <body>
    <main>
      <nav class="sans">
        <a href="/" class="">Sietch</a><a href="/get-started.html" class="">Get Started</a><a href="/reference/" class="">Reference</a>
      </nav>

      <h1>Islands</h1>

      <p>Use the <code>component</code> function in a template to render an <a href="https://jasonformat.com/islands-architecture/" target="_blank" rel="noopener noreferrer">&quot;island&quot;</a>.</p>
<pre tabindex="0" style="color:#b0c4de;background-color:#282c34;"><code><span style="display:flex;"><span>{{ component &#34;./counter.tsx&#34; }} 
</span></span></code></pre><p>If the component accepts props, then these can be passed as an additional argument.</p>
<pre tabindex="0" style="color:#b0c4de;background-color:#282c34;"><code><span style="display:flex;"><span>{{ component &#34;./counter.tsx&#34; (props &#34;count&#34; 1) }} 
</span></span></code></pre><p><em>Note</em>: Go's template language doesn't support map/object literals, so you'll need to use the <code>props</code> function to construct one from a list of keys and values.</p>
<p>Unless you opt-in, components will only be rendered at build time. This means your page will include the HTML they rendered, but the JavaScript won't sent to browsers and the &quot;island&quot; won't be interactive.</p>
<a href="#hydrate" class="permalink"><h2 id="hydrate">Hydrate</h2></a><p>Use the <code>hydrate</code> function to make islands load their JavaScript and become interactive immediately.</p>
<pre tabindex="0" style="color:#b0c4de;background-color:#282c34;"><code><span style="display:flex;"><span>{{ component &#34;./counter.tsx&#34; | hydrate }} 
</span></span></code></pre><a href="#on-idle" class="permalink"><h3 id="on-idle">On Idle</h3></a><p>Use the <code>hydrateOnIdle</code> function to make islands load their JavaScript and become interactive when the page calls <code>requestIdleCallback</code>.</p>
<pre tabindex="0" style="color:#b0c4de;background-color:#282c34;"><code><span style="display:flex;"><span>{{ component &#34;./counter.tsx&#34; | hydrate }} 
</span></span></code></pre><a href="#on-visible" class="permalink"><h3 id="on-visible">On Visible</h3></a><p>Use the <code>hydrateOnVisible</code> function to make islands load their JavaScript and become interactive when they become visible onscreen.</p>
<pre tabindex="0" style="color:#b0c4de;background-color:#282c34;"><code><span style="display:flex;"><span>{{ component &#34;./counter.tsx&#34; | hydrate }} 
</span></span></code></pre><a href="#client-only" class="permalink"><h3 id="client-only">Client Only</h3></a><p>Use the <code>clientOnly</code> function to prevent an island from rendering at build time. This can be useful for components that need to work with the DOM or other Web APIs that aren't available at build time.</p>
<pre tabindex="0" style="color:#b0c4de;background-color:#282c34;"><code><span style="display:flex;"><span>{{ component &#34;./counter.tsx&#34; | hydrate | clientOnly }} 
</span></span></code></pre><a href="#http-imports" class="permalink"><h2 id="http-imports">HTTP Imports</h2></a><p>In addition to importing from relative files and from <code>node_modules</code>, components can also import directly from HTTPS urls.</p>
<pre tabindex="0" style="color:#b0c4de;background-color:#282c34;"><code><span style="display:flex;"><span>import { moo } from &#34;https://esm.sh/cowsayjs@1.0.7&#34;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>export function render({ message }: { message: string }): string {
</span></span><span style="display:flex;"><span>  return moo(message);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre><p>This is a useful way to consume dependencies if you want to use Sietch without installing nodejs or npm.</p>
<p>HTTP imports will be downloaded and cached at build time, then bundled when your site is built. This means that they won't actually be used at runtime.</p>
<p>At some point, Sietch will support some form of user configured import maps to make managing HTTP imports simpler.</p>
<a href="#frameworks" class="permalink"><h2 id="frameworks">Frameworks</h2></a><a href="#vanilla" class="permalink"><h3 id="vanilla">Vanilla</h3></a><p>The default islands framework is a simple format where each islands file can export two functions.</p>
<a href="#preact" class="permalink"><h3 id="preact">Preact</h3></a><a href="#preact-remote" class="permalink"><h3 id="preact-remote">Preact Remote</h3></a><a href="#typescript" class="permalink"><h2 id="typescript">TypeScript</h2></a><a href="#caveats" class="permalink"><h2 id="caveats">Caveats</h2></a><a href="#v8" class="permalink"><h3 id="v8">V8</h3></a><a href="#esbuild" class="permalink"><h3 id="esbuild">ESBuild</h3></a>
    </main>
  <script>new WebSocket(`ws://${location.host}/ws`).onmessage = () => location.reload()</script></body>
</html>
